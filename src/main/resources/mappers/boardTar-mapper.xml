<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="boardTarMapper">

	<resultMap id="pagingmap" type="BoardTar">
		<result property="board_no" column="board_no"/>
		<result property="board_title" column="board_title"/>
		<result property="board_content" column="board_content"/>
		<result property="board_date" column="board_date"/>
		<result property="board_count" column="board_count"/>
		<result property="board_like" column="board_like"/>
		<result property="user_id" column="user_id"/>
	</resultMap>

	<!-- 게시물 숫자 카운트 -->
	<select id="selectListCount" resultType="int">
		SELECT COUNT(*) FROM tb_board_tar
	</select>

	<!-- startPage 와 endPage 사이의 appid 가 일치하는 게시물 리스트 최신순-->
	<select id="selectList" parameterType="Paging" resultMap="pagingmap">
		SELECT RNUM, BOARD_NO, BOARD_TITLE, BOARD_CONTENT, BOARD_DATE, BOARD_COUNT, BOARD_LIKE, USER_ID
		FROM (
				 SELECT ROWNUM RNUM, BOARD_NO, BOARD_TITLE, BOARD_CONTENT, BOARD_DATE, BOARD_COUNT, BOARD_LIKE, USER_ID
				 FROM TB_BOARD_TAR
				 WHERE APPID = ${appid}
				 ORDER BY BOARD_DATE DESC
			 )
		WHERE RNUM BETWEEN ${startRow} AND ${endRow}
	</select>

	<!-- 게시글 입력 -->
	<insert id="insertTarBoard" parameterType="BoardTar">
		INSERT INTO TB_BOARD_TAR (board_no, board_title, board_content, board_date, board_count, board_like, user_id, appid, board_orifile, board_refile, board_notice)
		VALUES (seq_board_tar.nextval, #{board_title}, #{board_content}, SYSDATE, 0, 0, #{user_id}, #{appid}, #{board_orifile}, #{board_refile}, #{board_notice})
	</insert>
</mapper>





